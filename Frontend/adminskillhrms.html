<!DOCTYPE html>
<html>
    <head>
        <title>CYBER HRMS</title>
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.css">





        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css">
        <!--        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>-->

        <script
                src="https://code.jquery.com/jquery-3.3.1.min.js"
                integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
                crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>

        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>
        <!--
<script
src="https://code.jquery.com/jquery-3.3.1.js"
integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
crossorigin="anonymous"></script>
-->
        <!--        <script type="text/javascript" src="employeelistbackend.js"></script>-->

        <!-- <script src="https://cdnjs.cloudfare.com/ajax/libs/select2/3.5.0/select2.min.js"></script> -->



        <meta name="viewport" content="width=device-width,initial-scale=1">
        <link href="employeeskillstyle.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>    
        <script>
            $(document).ready(function() {
                $('.js-example-basic-multiple').select2({
                    ajax: {
                        url: 'http://localhost:8081/skills/search',
                        data: function (params) {
                            var query = {
                                search: params.term,
                                page: params.page
                            }

                            // Query parameters will be ?search=[term]&page=[page]
                            return query;
                        }
                    }
                });

                $('#get-sel').click(function(){
                    console.log($('#mySelect2').select2('data'));
                })            

            });
        </script>
        <style>
            .select-wrap{
                width: 50%;
            }
        </style>


    </head>

    <body>
        <div class="container-fluid">

            <nav class="navbar navbar-expand-sm ">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <a class="navbar-brand"  href="#" ><img src="https://hrms.cygrp.com/content/images/logo.png" height="40" width="120"> </a>
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"><img src="menu-alt-512.png" height="30px" width="30px"></span>
                        </button>
                    </div>


                </div>
                <!-- buttons on right-->
                <div class="collapse navbar-collapse my-navbar-right navbtns-inline" id="navbarNav">
                    <ul class="nav navbar-nav navbar-right">
                        <li class="active"><button class="btn btn-outline-danger navbar-btn navigation-elements">CREATE</button>  </li>

                        <li><button class="btn btn-danger navbar-btn button-style">SKILLS</button></li>
                        <li><button class="btn btn-outline-danger navbar-btn navigation-elements">PROJECTS</button></li>
                        <li>
                            <button class="btn btn-outline-danger navbar-btn navigation-elements">LOGOUT</button>
                        </li>


                    </ul>
                </div>

            </nav>


            <div class="card bg-light text-center card-form form-style">
                <div class="card-body">


                    <div class="row">

                        <div class="col-md-4 col-sm-12 col-xs-12">
                            
                                <div class="modal fade" id="myModal">
                                    <div class="modal-dialog">
                                        <div class="modal-content">


                                            <div class="modal-header">
                                                <h4 class="modal-title skill-heading"> ADD IMAGE</h4>
                                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            </div>


                                            <div class="modal-body">
                                                <input class="skill-addition" type="text" placeholder="Provide Link Here"> 
                                            </div>


                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-danger" data-dismiss="modal">UPDATE</button>
                                            </div>

                                        </div>
                                    </div>  
                                </div>
                            </div>

                        </div>
                        <div class="row">
                        <div class="col-md-4 col-sm-12 col-xs-12">
                            <div class="container-fluid">

                                <h2>SELECT SKILLS<br><br></h2>

                                <div class="">
                                    <select id="mySelect2" class="js-example-basic-multiple select-wrap" name="states[]" multiple="multiple">
                                        <option value="AL">Alabama</option>
                                        <option value="WY">Wyoming</option>
                                    </select>
                                </div>
                                <button id="get-employees" class="btn btn-danger" style="margin-top: 10px">Get Employees</button>
                            </div>
                        </div>
                        <div class="col-md-4">
                    <table id="example" class="display" width="100%"></table>
                    </div>
                    </div>
                </div>
            </div>

        </div>
        <script>
            $(document).ready(function(){
            /*var studentSelect = $('#mySelect2');
            $.ajax({
                type: 'GET',
                url: 'http://localhost:8081/employees/INT000/skills',
                success:function (data) {
                // create the option and append to Select2
                for(var i = 0;i<data.length;i++){
                    console.log(i);
                    var option = new Option(data[i].text, data[i].id, true, true);
                    studentSelect.append(option).trigger('change');

                    // manually trigger the `select2:select` event
                    studentSelect.trigger({
                        type: 'select2:select',
                        params: {
                            data: data[i]
                        }
                    });
                }}});*/

            $('#get-employees').on('click',function(){
                console.log('in get employees');
                var data1 = $('#mySelect2').val();   
                console.log(data1);
                $.ajax({
                    type: 'POST',
                    url: 'http://localhost:8081/employees/skills/find',
                    data : {"skills" : data1
                           },
                    success:function(data){
                        alert('Successfull');
                        console.log(data);
                        dataSet = data.map((x)=>{
                            return [x.name,x.cgiCode,x.emailId,x.skills.map((x) => x.name).join(' ')]
                        })
                           $('#example').DataTable( {
        data: dataSet,
        columns: [
            { title: "Name" },
            { title: "CGICODE" },
            { title: "Email" },
            { title: "Skills" }
        ]
    } );
                    }
                });
            });
              
            });
        </script>
    </body>
    <footer class="foot">CYBER GROUP DEVELOPMENT
    </footer>
</html>